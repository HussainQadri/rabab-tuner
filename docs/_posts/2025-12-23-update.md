---
title: "December 23 Update – Change of frequency detection algorithm"
date: 2025-12-23
---

My initial implementation of the Rabab tuner used the FFT, it felt like the obvious starting point. Now that I have it somewhat functioning, I notice how inaccurate the FFT is for 'real', imperfect audio samples. 

My main misunderstanding was trying to find the pitch using the FFT, this is not its function, it simply presents what frequencies are present within a signal. I would take all these frequencies and accept the peak, the most powerful frequency to be the pitch of the signal - this is called the fundamental frequency. However, the fundamental frequency which I will refer to as f0 now does not have to be the strongest component of the signal. The presence of harmonics can dominate the spectrum instead, 'noise' (unwanted sounds) and string resonances can introduce unwanted peaks. The lesson learnt: the FFT peak with the greatest magnitude can not reliably be used to determine the pitch, f0. 

There are some other issues as well, like the frequency bins which are effectively discrete frequency intervals produced by the FFT. A greater spacing of these bins means a more accurate result, but depends on the window length. If I need a faster analysis, chances are the f0 detected will be horribly inaccurate. If I prioritise speed, I need a greater window length which increases analysis time. 

This is where the YIN algorithm comes in, and which I would describe as a spin-off of autocorelation with additional optimisation. The error rate produced by this algorithm is far lower than the traditional FFT. 

The FFT asks for frequencies present within a signal, but YIN measures the time it takes for the signal to repeat itself. Is robust at removing random noise, using the cumulative mean normalized difference function - puts less weight on high periodicity. 


[← Back to Home](../index.md)
